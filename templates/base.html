<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta property="og:title" content="Friendly Digest" />
    <meta property="og:image"
        content="https://res.cloudinary.com/web-slinger/image/upload/v1608119278/Milestone%203/friendly-digest-favicon_n8ncda.png" />
    <meta property="og:description"
        content="Friendly Digest offers dietary advice and food recipes for those with dietary requirements." />
    <meta property="og:url" content="https://friendly-digest.herokuapp.com/" />

    <!--Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!--Materialize CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css" />

    <!--Font Awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
        integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
        crossorigin="anonymous" type="text/css" />

    <!--Hover CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css" />

    <!--Personalised CSS-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css" />

    <!--Favicon-->
    <link
        href="https://res.cloudinary.com/web-slinger/image/upload/v1608119278/Milestone%203/friendly-digest-favicon_n8ncda.png"
        rel="shortcut icon" type="image/png" />

    <title>Friendly Digest</title>

</head>

<body>

    <header>
        
        <!--Friendly Digest Logo-->
        <div class="container-fluid center-align title-bg">
            <a href="{{ url_for('index') }}">
                <img class="responsive-img"
                    src="https://res.cloudinary.com/web-slinger/image/upload/v1606846955/Milestone%203/friendly-digest-logo_aus1ob.png"
                    alt="logo" />
            </a>
        </div>

        <!--Navigation Bar-->
        <nav class="nav-extended">
            <div class="nav-wrapper">

                <!--Desktop Nav Bar Links-->
                <ul class="hide-on-med-and-down" id="nav-tabs">

                    <li>
                        <a href="{{ url_for('index') }}" class="nav-text hvr-hang">Home</a>
                    </li>

                    <li>
                        <a class="dropdown-button nav-text" href="#!"
                            data-activates="dropdown-desktop">Recipes<i class="material-icons right">arrow_drop_down</i>
                        </a>
                    </li>

                    <!--Menu items displayed if user logged in-->
                    {% if session.user %}

                        <li>
                            <a href="{{ url_for('myRecipes', username=session['user']) }}"
                                class="nav-text hvr-hang">My Recipes</a>
                        </li>

                        <li>
                            <a href="{{ url_for('addRecipe') }}" class="nav-text hvr-hang">Add Recipe</a>
                        </li>

                        <li>
                            <a href="#modal-l" class="nav-text hvr-hang modal-trigger">Log Out</a>

                            <!--Log Out Modal Message-->
                            <div id="modal-l" class="modal">

                                <div class="modal-content lh-0">
                                    <h4 class="center-align">Warning!</h4>
                                    <p class="mt-3 center-align">Are you sure you want to log out?</p>
                                </div>

                                <!--Modal Buttons-->
                                <div class="modal-footer lh-0">
                                    <a href="#!" class="modal-action modal-close btn-flat mr-1pt5">No</a>
                                    <a href="{{ url_for('logout') }}"
                                        class="modal-action modal-close btn-flat mr-1pt5">Yes</a>
                                </div>

                            </div>
                        </li>
                    
                    <!--Menu items displayed if user logged out-->
                    {% else %}

                        <li>
                            <a href="{{ url_for('login') }}" class="nav-text hvr-hang">Log In</a>
                        </li>

                        <li>
                            <a href="{{ url_for('register') }}" class="nav-text hvr-hang">Register</a>
                        </li>

                    {% endif %}
                </ul>

                <!--Dropdown Links for Desktop-->
                <ul id="dropdown-desktop" class="dropdown-content">

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='meat') }}">Meat</a>
                    </li>

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='fish') }}">Fish</a>
                    </li>

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='veg') }}">Veg</a>
                    </li>

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='dessert') }}">Dessert</a>
                    </li>

                </ul>

                <!--Hamburger Icon for Mobile Dropdown Menu-->
                <a href="#" data-activates="mobile-demo" class="button-collapse right">
                    <i class="fas fa-bars"></i>
                </a>

                <!--Mobile Dropdown Menu (Side Navigation Bar)-->
                <ul class="side-nav" id="mobile-demo">

                    <!--Friendly Digest Hat Image-->
                    <li class="center-align d-block">
                        <img class="chef-hat"
                        src="https://res.cloudinary.com/web-slinger/image/upload/v1606251385/Milestone%203/chef-hat_qxyvpg.png"
                        alt="Friendly Digest Logo" />
                    </li>

                    <!--Mobile Nav Bar Links-->
                    <li>
                        <a href="{{ url_for('index') }}">Home</a>
                    </li>

                    <li>
                        <a class="dropdown-trigger" href="#!" 
                            data-activates="dropdown-mobile">Recipes
                                <i class="material-icons right">arrow_drop_down</i>
                        </a>
                    </li>

                    <!--Menu items displayed if user logged in-->
                    {% if session.user %}

                        <li>
                            <a href="{{ url_for('myRecipes', username=session['user']) }}">My Recipes</a>
                        </li>

                        <li>
                            <a href="{{ url_for('addRecipe') }}">Add Recipe</a>
                        </li>

                        <li>
                            <a href="{{ url_for('logout') }}">Log Out</a>
                        </li>
                    
                    <!--Menu items displayed if user logged out-->
                    {% else %}

                        <li>
                            <a href="{{ url_for('login') }}">Log In</a>
                        </li>
                        
                        <li>
                            <a href="{{ url_for('register') }}">Register</a>
                        </li>

                    {% endif %}
                </ul>

                <!--Dropdown Links for Mobile-->
                <ul id="dropdown-mobile" class="dropdown-content">

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='meat') }}">Meat</a>
                    </li>

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='fish') }}">Fish</a>
                    </li>

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='veg') }}">Veg</a>
                    </li>

                    <li>
                        <a href="{{ url_for('categoryRecipes', category='dessert') }}">Dessert</a>
                    </li>
                    
                </ul>

            </div>
        </nav>
    </header>

    <main>

        <section>
            <!--Flash Messages-->
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                        <div class="row mt-3">
                            <div class="col s12 m8 offset-m2">
                                <div class="card-panel center-align flash-card z-depth-0">
                                    <span>{{ message }}</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </section>

        <!--Search bar code to be displayed on certain pages-->
        {% block search_bar %}

        <div class="container">
            <div class="row">

                <!--Recipe Search Bar-->
                <form action="{{ url_for('search') }}" method="POST" class="col s12">
                    <div class="row card-panel transparent z-depth-0 valign-wrapper center-align">
                        <div class="input-field col s12 l8">
                            <i class="fas fa-search prefix icon-color"></i>
                            <input type="text" name="query" id="query" minlength="3" class="validate" required>
                            <label for="query">Search All Recipes</label>
                        </div>

                        <!--Search and Return Buttons-->
                        <div class="col s12 l4">
                            <button type="submit" class="btn card-btn">
                                <i class="fas fa-search"></i>
                            </button>

                            <!--Block return button for certain pages-->
                            {% block undo_button %}
                                <a href="#" onclick="history.go(-1)" class="btn card-btn"><i class="fas fa-undo"></i></a>
                            {% endblock %}
                        </div>
                    </div>
                </form>
            </div>
        </div>
        {% endblock %}

        <!-- Main Content -->
        {% block content %} 
        {% endblock %}

    </main>

    <footer class="page-footer">

        <!--Footer Developer Information-->
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="footer-text">Developer Information</h5>
                    <p class="footer-text">Lewis Wheeler is a full stack web developer, with expertise in both front &
                        backend design. Lewis lives in the heart of Devon, England, and is keen to hear about any
                        business or personal software development project opportunity.
                        Contact Lewis now using the links provided if you have a project in mind.</p>
                </div>

                <!--Social Links Header-->
                <div class="col l6 s12">
                    <h5 class="footer-text center-align">Social Links</h5>

                    <ul>
                        <li>
                            <div class="col s4 offset-s2">
                                <!--Developer LinkedIn Button-->
                                <a href="https://www.linkedin.com/in/lewis-wheeler-aa91791a0/" target="_blank">
                                        <div class="social-btn center-align">
                                            <i class="fab fa-linkedin hvr-grow"></i>
                                        </div>
                                    </a>
                            </div>
                        </li>
                            
                        <li>
                            <div class="col s4">
                                <!--Developer Github Button-->
                                    <a href="https://github.com/WebSlinger88" target="_blank">
                                        <div class="social-btn center-align">
                                        <i class="fab fa-github hvr-grow"></i>
                                        </div>
                                    </a>
                            </div>
                        </li>
                    </ul>

                </div>
            </div>
        </div>

        <!--Developer Copyright Information-->
        <div class="footer-copyright transparent">
            <div class="container">
                <p class="footer-text center-align">
                    Copyright - All Rights Reserved - Lewis Wheeler - Full Stack Web Developer ©
                    <!--JavaScript date generated via id-->
                    <span id="copyright"></span></p>
            </div>
        </div>

    </footer>

    <!--To Top Button-->
    <a href="#top" class="btn-floating btn-large z-depth-5 to-top" title="Back to top"><i
            class="fas fa-angle-double-up"></i></a>

    <!--Import jQuery & Materialize Javascript Libraries-->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

    <!--Local JavaScript-->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

</body>

</html>